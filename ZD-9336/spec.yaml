version: "1.0"
kind: pipeline
metadata:
  name: ptm/ZD9336
  project: ptm


# Stages can help you organize your steps in stages
spec:
  stages:
    - "clone"
    - "test"

  steps:
    clone:
      title: "Cloning repository"
      type: "git-clone"
      repo: "lrochette/ptm-tests"
      revision: "main"
      stage: "clone"

    test:
      title: "Running test"
      type: "freestyle" # Run any command
      image: "codefresh/cli" # The image in which command will be executed
      working_directory: "${{clone}}" # Running command where code cloned
      commands:
        - "ls"
      stage: "test"
      when:
        steps:
        - name: clone
          'on':
            - success
